# 第九章、vim 程式編輯器
系統管理員的重要工作就是得要修改與設定某些重要軟體的設定檔，因此至少得要學會一種以上的文字介面的文書編輯器。 在所有的 Linux distributions 上頭都會有的一套文書編輯器就是 vi ，而且很多軟體預設也是使用 vi 做為他們編輯的介面， 因此鳥哥建議您務必要學會使用 vi 這個正規的文書編輯器。此外，vim 是進階版的 vi ， vim 不但可以用不同顏色顯示文字內容，還能夠進行諸如 shell script, C program 等程式編輯功能， 你可以將 vim 視為一種程式編輯器！鳥哥也是用 vim 編輯鳥站的網頁文章呢！ ^_^

## 9.1 vi 與 vim
由前面一路走來，我們一直建議使用文字模式來處理 Linux 系統的設定問題，因為不但可以讓你比較容易瞭解到 Linux 的運作狀況，也比較容易瞭解整個設定的基本精神，更能『保證』你的修改可以順利的被運作。 所以，在 Linux 的系統中使用文字編輯器來編輯你的 Linux 參數設定檔，可是一件很重要的事情呦！也因此呢，系統管理員至少應該要熟悉一種文書處理器的！

在 Linux 的世界中，絕大部分的設定檔都是以 ASCII 的純文字形態存在，因此利用簡單的文字編輯軟體就能夠修改設定了！ 與微軟的 Windows 系統不同的是，如果你用慣了 Microsoft Word 或 Corel Wordperfect 的話，那麼除了 X window 裡面的圖形介面編輯程式(如 xemacs )用起來尚可應付外，在 Linux 的文字模式下，會覺得文書編輯程式都沒有視窗介面來的直觀與方便。
>什麼是純文字檔？其實檔案記錄的就是 0 與 1 ，而我們透過編碼系統來將這些 0 與 1 轉成我們認識的文字就是了。 在第零章裡面的資料表示方式有較多說明，請自行查閱。 ASCII 就是其中一種廣為使用的文字編碼系統，在 ASCII 系統中的圖示與代碼可以參考 http://zh.wikipedia.org/wiki/ASCII呢！
### 9.1.1 為何要學 vim
文書編輯器那麼多，我們之前在第四章也曾經介紹過那簡單好用的 nano ，既然已經學會了 nano ，幹嘛鳥哥還一直要你學這不是很友善的 vi 呢？其實是有原因的啦！因為：

- 所有的 Unix Like 系統都會內建 vi 文書編輯器，其他的文書編輯器則不一定會存在；
- 很多個別軟體的編輯介面都會主動呼叫 vi (例如未來會談到的 crontab, visudo, edquota 等指令)；
- vim 具有程式編輯的能力，可以主動的以字體顏色辨別語法的正確性，方便程式設計；
- 因為程式簡單，編輯速度相當快速。

其實重點是上述的第二點，因為有太多 Linux 上面的指令都預設使用 vi 作為資料編輯的介面，所以你必須、一定要學會 vi ，否則很多指令你根本就無法操作呢！這樣說，有刺激到你務必要學會 vi 的熱情了嗎？ ^_^

那麼什麼是 vim 呢？其實你可以將 vim 視作 vi 的進階版本，vim 可以用顏色或底線等方式來顯示一些特殊的資訊。 舉例來說，當你使用 vim 去編輯一個 C 程式語言的檔案，或者是我們後續會談到的 shell script 腳本程式時，vim 會依據檔案的副檔名或者是檔案內的開頭資訊， 判斷該檔案的內容而自動的呼叫該程式的語法判斷式，再以顏色來顯示程式碼與一般資訊。也就是說， 這個 vim 是個『程式編輯器』啦！甚至一些 Linux 基礎設定檔內的語法，都能夠用 vim 來檢查呢！ 例如我們在第七章談到的 /etc/fstab 這個檔案的內容。

## 9.2 vi 的使用
基本上 vi 共分為三種模式，分別是『一般指令模式』、『編輯模式』與『指令列命令模式』。 這三種模式的作用分別是：

- 一般指令模式 (command mode)
以 vi 打開一個檔案就直接進入一般指令模式了(這是預設的模式，也簡稱為一般模式)。在這個模式中， 你可以使用『上下左右』按鍵來移動游標，你可以使用『刪除字元』或『刪除整列』來處理檔案內容， 也可以使用『複製、貼上』來處理你的文件資料。

- 編輯模式 (insert mode)
在一般指令模式中可以進行刪除、複製、貼上等等的動作，但是卻無法編輯文件內容的！ 要等到你按下『i, I, o, O, a, A, r, R』等任何一個字母之後才會進入編輯模式。注意了！通常在 Linux 中，按下這些按鍵時，在畫面的左下方會出現『 INSERT 或 REPLACE 』的字樣，此時才可以進行編輯。而如果要回到一般指令模式時， 則必須要按下『Esc』這個按鍵即可退出編輯模式。

- 指令列命令模式 (command-line mode)
在一般模式當中，輸入『 : / ? 』三個中的任何一個按鈕，就可以將游標移動到最底下那一列。在這個模式當中， 可以提供你『搜尋資料』的動作，而讀取、存檔、大量取代字元、離開 vi 、顯示行號等等的動作則是在此模式中達成的！

簡單的說，我們可以將這三個模式想成底下的圖示來表示：
<div align=center><img src="/os_note/vim/picture/centos7_vi-mode.gif"></div>
<div align=center>圖9.2.1、vi三種模式的相互關係</div>
注意到上面的圖示，你會發現一般指令模式可與編輯模式及指令列模式切換， 但編輯模式與指令列模式之間不可互相切換喔！這非常重要啦！閒話不多說，我們底下以一個簡單的例子來進行說明吧！
